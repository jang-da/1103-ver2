<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>카제로스 레이드</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- 배경 동영상 컨테이너 -->
    <div class="video-background">
        <video autoplay muted loop id="bg-video">
            <!-- 여기에 사용할 동영상 파일 경로를 넣어주세요 -->
            <source src="images/mp4.mp4" type="video/mp4">
            이 브라우저는 비디오 태그를 지원하지 않습니다.
        </video>
    </div>

    <!-- 동영상 위에 올라갈 콘텐츠 -->
    <div class="content-overlay">
        <!-- 왼쪽 콘텐츠 -->
        <div class="left-content">
            <div class="text-background animate-on-scroll">
                <div class="title-container">
                    <img src="images/@index_tit1_1 (1).webp" alt="최" class="title-char">
                    <img src="images/@index_tit1_2.webp" alt="후" class="title-char">
                    <img src="images/@index_tit1_3.webp" alt="의" class="title-char">
                    <img src="images/@index_tit1_4.webp" alt="날" class="title-char">
                </div>
                <img src="images/@index_tit2.webp" alt="종막" class="left-image">
                <img src="images/@index_txt.webp" alt="업데이트" class="update-image">

            </div>
        </div>

        <!-- 아래에 추가될 새로운 콘텐츠 -->
        <div class="new-content-section animate-on-scroll">
            <div class="slider-container">
                <div class="slides-wrapper">
                    <div class="slide"><img src="images/event1_slide1.webp" alt="이벤트 이미지 1"></div>
                    <div class="slide"><img src="images/event1_slide4.webp" alt="이벤트 이미지 2"></div>
                    <div class="slide"><img src="images/event1_slide2.webp" alt="이벤트 이미지 3"></div>
                </div>
                <button class="prev-btn">‹</button>
                <button class="next-btn">›</button>
            </div>
            <div class="text-box">
                <img src="images/@event1_txt1.webp" alt="이벤트 상세 정보">
                <img src="images/@event1_txt2.webp" alt="이벤트 상세 정보">
                <img src="images/@event1_txt3.webp" alt="이벤트 상세 정보">
            </div>
        </div>

        <!-- 단독으로 배치될 이미지 -->
        <img src="images/@event1_txt4.webp" alt="이벤트 상세 정보" class="standalone-image animate-on-scroll">

        <!-- 새로운 이벤트 섹션 2 -->
        <div class="event2-section animate-on-scroll">
            <!-- 텍스트 콘텐츠 -->
            <div class="event2-text-container">
                <img src="images/@event2_tit.webp" alt="이벤트 제목" class="event2-title">
                <img src="images/@event2_txt1.webp" alt="이벤트 내용 1" class="event2-text">
                <img src="images/@event2_txt2.webp" alt="이벤트 내용 2" class="event2-text">
            </div>
            <!-- 배경 역할을 하는 캐릭터 이미지 -->
            <img src="images/@event2_obj.webp" alt="이벤트 오브젝트" class="event2-object">
        </div>

        <!-- 입장 조건 섹션 -->
        <div class="entry-conditions-section animate-on-scroll">
            <img src="images/@event4_tit.webp" alt="입장 조건 제목" class="entry-title-img">
            <img src="images/@event4_txt.webp" alt="입장 조건 내용" class="entry-text-img">
            <div class="entry-objects-container">
                <img src="images/@event4_obj1.webp" alt="보상 1" class="entry-object-img">
                <img src="images/@event4_obj2.webp" alt="보상 2" class="entry-object-img">
                <img src="images/@event4_obj3.webp" alt="보상 3" class="entry-object-img">
            </div>
        </div>
    </div>

    <!-- 페이지 하단 푸터 -->
    <footer>
        <div class="footer-content">
            <img src="images/logo_rpg.png" alt="Smilegate RPG Logo" class="footer-logo">
            <div class="footer-text">
                <p>본 페이지는 상업적 목적이 아닌 개인 포트폴리오용으로 제작되었습니다.</p>
                <p>사용된 모든 리소스의 저작권은 스마일게이트 RPG의 로스트아크에 있습니다. &copy; Smilegate RPG. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- GSAP & ScrollTrigger 라이브러리 추가 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <script>
        const slidesWrapper = document.querySelector('.slides-wrapper');
        const slides = document.querySelectorAll('.slide');
        const prevBtn = document.querySelector('.prev-btn');
        const nextBtn = document.querySelector('.next-btn');
        let currentIndex = 0;

        function goToSlide(index) {
            const slideWidth = slides[0].clientWidth; // 슬라이드 너비를 함수 호출 시마다 다시 계산
            slidesWrapper.style.transform = `translateX(-${index * slideWidth}px)`;
            currentIndex = index;
        }

        prevBtn.addEventListener('click', () => {
            const newIndex = (currentIndex - 1 + slides.length) % slides.length;
            goToSlide(newIndex);
        });

        nextBtn.addEventListener('click', () => {
            const newIndex = (currentIndex + 1) % slides.length;
            goToSlide(newIndex);
        });

        // 5초마다 자동으로 다음 슬라이드로 이동
        setInterval(() => {
            const newIndex = (currentIndex + 1) % slides.length;
            goToSlide(newIndex);
        }, 5000);

        // 창 크기가 변경될 때 슬라이드 너비를 다시 계산 (반응형 대응)
        window.addEventListener('resize', () => {
            slidesWrapper.style.transition = 'none'; // 너비 변경 시 애니메이션 비활성화
            goToSlide(currentIndex); // 현재 슬라이드로 즉시 이동하여 위치 재조정
            slidesWrapper.offsetHeight; // 브라우저 리플로우 강제
            slidesWrapper.style.transition = 'transform 0.5s ease-in-out'; // 다시 애니메이션 활성화
        });

        // --- 배경 비디오 반응형 조정을 위한 스크립트 ---
        function resizeVideo() {
            const video = document.getElementById('bg-video');
            const videoContainer = document.querySelector('.video-background');
            
            const containerWidth = videoContainer.clientWidth;
            const containerHeight = videoContainer.clientHeight;
            const videoRatio = video.videoWidth / video.videoHeight;
            const containerRatio = containerWidth / containerHeight;

            if (containerRatio > videoRatio) {
                // 컨테이너가 비디오보다 넓을 경우 (가로로 긴 화면)
                video.style.width = containerWidth + 'px';
                video.style.height = 'auto';
            } else {
                // 컨테이너가 비디오보다 높을 경우 (세로로 긴 화면)
                video.style.height = containerHeight + 'px';
                video.style.width = 'auto';
            }
        }

        window.addEventListener('resize', resizeVideo);
        resizeVideo(); // 페이지 로드 시 초기 실행

        // --- 스크롤 애니메이션을 위한 스크립트 ---
        document.addEventListener('DOMContentLoaded', () => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target); // 애니메이션은 한 번만 실행
                    }
                });
            }, {
                threshold: 0.1 // 요소가 10% 보일 때 애니메이션 실행
            });

            // 애니메이션 적용할 모든 요소들을 관찰
            const elementsToAnimate = document.querySelectorAll('.animate-on-scroll');
            elementsToAnimate.forEach(el => observer.observe(el));

            // --- GSAP ScrollTrigger를 사용한 스크롤 스냅 효과 ---
            gsap.registerPlugin(ScrollTrigger);

            ScrollTrigger.create({
                trigger: ".event2-section", // 스냅 효과를 적용할 섹션
                start: "top top", // 섹션의 상단이 뷰포트의 상단에 닿을 때
                end: "+=100%", // 섹션 높이만큼 스크롤될 동안
                snap: {
                    snapTo: "labels", // 섹션의 시작과 끝 지점에 스냅
                    duration: { min: 0.2, max: 1 }, // 스냅 애니메이션 지속 시간
                    delay: 0.1, // 스크롤 멈춘 후 스냅까지의 딜레이
                    ease: "power1.inOut" // 부드러운 스냅 효과
                }
            });
        });
    </script>
</body>
</html>